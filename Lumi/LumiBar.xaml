<Window x:Class="Lumi.LumiBar"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:Lumi.Infrastructure"
        mc:Ignorable="d"
        Width="320"
        Height="600"
        WindowStyle="None"
        ResizeMode="NoResize"
        ShowInTaskbar="False"
        Topmost="True"
        Background="#1E1E1E">

    
    <Border x:Name="Root"
            Background="#242525"
            BorderBrush="#3A3A3A"
            BorderThickness="1"
            Padding="1"
            MouseEnter="Root_MouseEnter"
            MouseLeave="Root_MouseLeave"
            MouseMove="Root_MouseMove">

        <Grid Margin="8">
            <Grid.RowDefinitions>
                <RowDefinition Height="*" />
                <RowDefinition Height="Auto" />
            </Grid.RowDefinitions>

            <!-- Oben: Scrollbarer Bereich für die großen Buttons -->
            <ScrollViewer Grid.Row="0"
                          VerticalScrollBarVisibility="Auto"
                          HorizontalScrollBarVisibility="Disabled"
                          Padding="0,0,1,0">

                <ScrollViewer.Resources>
                    <Style TargetType="ScrollBar"
                           BasedOn="{StaticResource SlimVerticalScrollBar}"/>
                </ScrollViewer.Resources>

                <ItemsControl ItemsSource="{Binding MainButtons}">
                    <ItemsControl.ItemTemplate>
                        <DataTemplate>
                            <Button
                                Margin="0,0,0,8"
                                SizeChanged="SquareButton_SizeChanged"
                                Style="{StaticResource SquareButtonStyle_V2}"
                                Command="{Binding Command}"
                                local:IconButton.IconData="{Binding IconKey, Converter={StaticResource IconKeyToGeometryConverter}}" />
                        </DataTemplate>
                    </ItemsControl.ItemTemplate>
                </ItemsControl>


            </ScrollViewer>

            <!-- Unten: immer sichtbar -->
            <Grid Grid.Row="1">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="*" />
                </Grid.ColumnDefinitions>

                <Button Grid.Column="0"
                        Click="Settings_Click"
                        Margin="0,0,2,0"
                        SizeChanged="SquareButton_SizeChanged"
                        Style="{StaticResource SquareButtonStyle_V2}"
                        local:IconButton.IconData="{StaticResource tdesign_setting_1_filled}"
                        local:IconButton.IconFill="#3A7BD5"
                        local:IconButton.IconFillHover="#4C8EE6"
                        local:IconButton.IconFillPressed="#2E5FA8"/>

                <Button Grid.Column="1"
                        Click="Exit_Click"
                        Margin="2,0,0,0"
                        SizeChanged="SquareButton_SizeChanged"
                        Style="{StaticResource SquareButtonStyle_V2}"
                        local:IconButton.IconData="{StaticResource tdesign_poweroff}"
                        local:IconButton.IconFill="#C93A3A"
                        local:IconButton.IconFillHover="#E14B4B"
                        local:IconButton.IconFillPressed="#8F1D1D"/>
            </Grid>
        </Grid>
    </Border>
</Window>
